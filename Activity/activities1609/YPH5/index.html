<script src="js/jquery-2.1.1.min.js"></script>
<script src="js/jquery.cookie.js"></script>
<div class="s"></div>
<script type="text/javascript">

$(function(){
	openid = urlGet()['openid'];
	signopenid = urlGet()['signopenid'];
	$.cookie('openid', urlGet()['openid']);
	$.cookie('activity_id', urlGet()['activity_id']);
	$.cookie('third_party_openid', signopenid);
	$.cookie('third_party_name', 'yaoyaohui');
	if (typeof(signopenid) == 'undefined') {
	    var _url = "http://ab.aikaka.com.cn/PublicService/Weixin/oauth/base?callback_url=http%3a%2f%2fab.aikaka.com.cn%2fshakeApp%2factivities1609%2fYPH5%2findex.html&openid="+urlGet()['openid']+"&app_id=wx7ac53bee6ee222ba";
	    window.location.href = _url;
	}else{
		$.cookie('openid', urlGet()['openid']);
		$.cookie('activity_id', urlGet()['activity_id']);
		$.cookie('third_party_openid', signopenid);
		$.cookie('third_party_name', 'yaoyaohui');
		$.cookie('subscribe', urlGet()['subscribe']);
		window.location.href = 'coupon.html';
	}
});

function urlGet()
{
    var aQuery = window.location.href.split("?");//取得Get参数
    var aGET = new Array();
    if(aQuery.length > 1)
    {
        var aBuf = aQuery[1].split("&");
        for(var i=0, iLoop = aBuf.length; i<iLoop; i++)
        {
            var aTmp = aBuf[i].split("=");//分离key与Value
            aGET[aTmp[0]] = aTmp[1];
        }
    }
    return aGET;
}
	
</script>